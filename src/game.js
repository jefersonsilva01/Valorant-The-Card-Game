function game() { const e = document.createElement("script"); e.setAttribute("src", "./src/lose.js"); const l = document.createElement("script"); l.setAttribute("src", "./src/home.js"); const n = document.getElementById("game-area"), t = document.getElementById("timer"), s = document.getElementById("input"), a = document.getElementById("confirm"), i = document.getElementById("modal-card"), r = document.getElementById("modal-card-title"), c = document.getElementById("modal-card-area"), d = document.getElementById("cards-player"), o = document.getElementById("score-player"), p = document.getElementById("player-turn"), u = document.getElementById("cards-cpu"), m = document.getElementById("score-cpu"), y = document.getElementById("cpu-turn"), f = document.getElementById("play"); let k, g, v = 0; const h = new CardGame(characters); function T() { 0 === v ? (p.classList.add("turn"), y.classList.remove("turn")) : 1 === v && (p.classList.remove("turn"), y.classList.add("turn")) } function C(e, l) { const t = e[0], s = document.createElement("div"); s.classList.add(`card-flip-${l}-fliped`, `card-flip-${l}`); const a = document.createElement("div"); let i, r; a.classList.add("card-inner"), "player" === l && (s.onclick = () => s.classList.remove("card-flip-player-fliped")), i = `\n      <div id="${t.id}" class="card-${l}" style="background-image: url(${t.cover});">      \n        <img class="info-${l}" src="./assets/images/info.svg">\n        <div class="card-info">\n          <span class="name">${t.name}</span>\n          <img class="class" src='${t.class}'>\n          <ul class="list-cards">\n            <li class="skill-${l}">\n              <span>ATTACK</span>\n              <span>${t.skills.attack}</span>\n            </li>\n            <li class="skill-${l}">\n              <span>DEFENSE</span>\n              <span>${t.skills.defense}</span>\n            </li>\n            <li class="skill-${l}">\n              <span>AGILITY</span>\n              <span>${t.skills.agility}</span>\n            </li>\n            <li class="skill-${l}">\n              <span>TECH</span>\n              <span>${t.skills.tech}</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n      `, r = '\n      <div \n        class="card-back" \n        style="\n          background-image: url(\'./assets/images/card unflip.png\');\n          background-size: cover;\n          background-position: center;\n        ">\n      </div>\n      ', a.innerHTML += '\n      <div \n        class="card-back" \n        style="\n          background-image: url(\'./assets/images/card unflip.png\');\n          background-size: cover;\n          background-position: center;\n        ">\n      </div>\n      ', a.innerHTML += i, s.appendChild(a), n.appendChild(s) } function E(e) { "player" === e ? document.querySelectorAll(`.skill-${e}`).forEach((e => { e.onclick = () => { o.innerText = e.children[1].innerText, h.skillsPlayer.name = e.children[0].innerText, h.skillsPlayer.skill = parseInt(e.children[1].innerText) } })) : "cpu" === e && document.querySelectorAll(`.skill-${e}`).forEach((e => { e.children[0].innerText === h.skillsPlayer.name && (h.skillsCPU.name = e.children[0].innerText, h.skillsCPU.skill = parseInt(e.children[1].innerText)) })) } function I() { m.innerText = "00", o.innerText = "00", d.innerText = h.PlayerCards.length, u.innerText = h.CPUCards.length } function P() { let e = document.querySelector(".card-flip-cpu"); e.classList.contains("card-flip-cpu-fliped") && e.classList.remove("card-flip-cpu-fliped"), m.innerText = h.skillsCPU.skill, o.innerText = h.skillsPlayer.skill, setTimeout((() => { e.classList.add("remove-cpu-left"), C(h.CPUCards, "cpu") }), 2e3), v = 1, setTimeout((() => { e.remove(), B(), T(), I(), $() }), 3e3) } function L() { let e = document.querySelector(".card-flip-player"); e.classList.contains("card-flip-player-fliped") && e.classList.remove("card-flip-player-fliped"), m.innerText = h.skillsCPU.skill, o.innerText = h.skillsPlayer.skill, setTimeout((() => { e.classList.add("remove-player-right"), C(h.PlayerCards, "player") }), 2e3), v = 0, setTimeout((() => { T(), I(), e.remove(), B(), E("player") }), 3e3) } function x() { const l = h.gameEnded(); "player lose" === l ? fetch("./pages/lose.html").then((e => e.text())).then((e => app.innerHTML = e)).then(app.appendChild(e)) : "cpu lose" === l && (s.style.display = "block", clearInterval(k), clearInterval(g)) } function $() { const e = parseInt(document.querySelector(".card-cpu").id), l = parseInt(document.querySelector(".card-player").id); let n, t = 0; h.CPUCards.forEach((l => { if (l.id === e) for (skillItem in l.skills) l.skills[skillItem] > t && l.skills[skillItem] <= 7 && (t = l.skills[skillItem], n = skillItem) })), h.skillsPlayer.name = n, h.skillsCPU.name = n, h.skillsCPU.skill = t, h.PlayerCards.forEach((e => { e.id === l && (h.skillsPlayer.skill = e.skills[n]) })); const s = h.compareSkills(); if ("playerWin" === s) P(); else if ("cpuWin" === s) L(); else { let e = document.querySelector(".card-flip-cpu"), l = document.querySelector(".card-flip-player"); l.classList.contains("card-flip-player-fliped") && l.classList.remove("card-flip-player-fliped"), e.classList.remove("card-flip-cpu-fliped"), m.innerText = h.skillsCPU.skill, o.innerText = h.skillsPlayer.skill, setTimeout((() => { e.classList.add("remove-cpu-right"), l.classList.add("remove-player-left"), C(h.CPUCards, "cpu"), C(h.PlayerCards, "player") }), 2e3), v = 0, setTimeout((() => { I(), e.remove(), l.remove(), E("player"), B(), T() }), 3e3) } x() } function B() { const e = document.querySelector(".info-player"), l = document.querySelector(".info-cpu"), n = parseInt(document.querySelector(".card-player").id), t = parseInt(document.querySelector(".card-cpu").id), s = document.createElement("div"); function a(e) { characters.forEach((l => { l.id === e && (s.innerText = l.bio, c.appendChild(s), r.innerText = l.name, i.style.display = "block") })) } function d() { i.style.display = "none", c.removeChild(c.lastElementChild) } s.setAttribute("id", "modal-card-content"), e.onmouseover = () => a(n), l.onmouseover = () => a(t), e.onmouseleave = () => d(), l.onmouseleave = () => d() } h.shuffleCards(), h.getCards(), f.onclick = function (e) { e.preventDefault(), function () { if (parseInt(o.innerText) > 0) { E("cpu"); const e = h.compareSkills(); if ("playerWin" === e) P(); else if ("cpuWin" === e) L(); else { let e = document.querySelector(".card-flip-cpu"), l = document.querySelector(".card-flip-player"); e.classList.remove("card-flip-cpu-fliped"), m.innerText = h.skillsCPU.skill, o.innerText = h.skillsPlayer.skill, setTimeout((() => { e.classList.add("remove-cpu-right"), l.classList.add("remove-player-left"), C(h.CPUCards, "cpu"), C(h.PlayerCards, "player") }), 2e3), v = 1, setTimeout((() => { I(), e.remove(), l.remove(), B(), T(), $() }), 3e3) } x() } }() }, a.onclick = function (e) { e.preventDefault(); const n = document.getElementsByTagName("input")[0], a = t.innerText, i = { name: n.value, time: a }; n.value.length >= 3 && (leaders.unshift(i), s.style.display = "none", fetch("./pages/home.html").then((e => e.text())).then((e => app.innerHTML = e)).then(app.appendChild(l))) }, C(h.PlayerCards, "player"), C(h.CPUCards, "cpu"), function () { let e = 0, l = 0; g = setInterval((() => e++), 1e3), k = setInterval((() => { l++; let n = e % 60 < 10 ? "0" + e % 60 : e % 60, s = Math.floor(e / 60) < 10 ? "0" + Math.floor(e / 60) : e % 60; t.innerText = `${s}:${n}.0${l % 10}` }), 100) }(), T(), I(), B(), E("player"); let S, b = document.getElementById("sound-01"); function q() { S = Math.floor(4 * Math.random() + 1), b = document.getElementById(`sound-0${S}`) } function U() { b.currentTime = 0, b.play() } b.addEventListener("loadedmetadata", (() => { q(), setTimeout(U, 3e3) })), b.addEventListener("timeupdate", (() => { b.currentTime >= .97 * b.duration && (q(), U()) })) } game();